{"componentChunkName":"component---node-modules-gatsby-theme-code-notes-src-templates-note-js","path":"/imagemanagement/get-raw-disk-usage-of-images/","result":{"data":{"mdx":{"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Get raw disk usage of all images per namespace\",\n  \"tags\": [\"Openshift 4\", \"Images\", \"Admin Tasks\"],\n  \"emoji\": \"ðŸ’¾\",\n  \"link\": \"https://docs.openshift.com/container-platform\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", {\n    \"id\": \"get-raw-disk-usage-of-all-images-per-namespace\"\n  }, \"Get raw disk usage of all images per namespace\"), mdx(\"p\", null, \"This script provides the sum of the size of all images per namespace algthough it's not considering the disk saving provided by the reuse of the layers.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"#/bin/bash\\n\\n# use a temp file\\n_tmpfile=$( mktemp )\\n\\n# extract the data for each image: name and size (in Bytes)\\nfor _line in $( oc adm top images | head | awk '!/^NAME/ { print $2\\\":\\\"$NF }' | grep -v \\\"none\\\" | sort ); do\\n  _image=$( echo $_line | cut -d \\\":\\\" -f 1 )\\n  _size=$( echo $_line | cut -d \\\":\\\" -f 2 | sed 's/B$//' | numfmt --from=iec-i )\\n\\n  echo \\\"$_image:$_size\\\"\\ndone > $_tmpfile\\n\\n# process the previous list for each namespace and show the total size in human-readable values\\necho \\\"Raw disk usage per namespace (not considering layers re-use):\\\"\\nfor _namespace in $( cat $_tmpfile | cut -d \\\\/ -f 1 | sort -u ); do\\n  _size=$( grep $_namespace $_tmpfile | cut -d\\\\: -f 2 | paste -s -d+ - | bc | numfmt --to=iec-i --suffix=B --padding=7 )\\n  echo -e \\\"- $_namespace\\\\t$_size\\\"\\ndone\\n\\n# cleanup temp dir\\nrm -fr $_tmpfile\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Get raw disk usage of all images per namespace","tags":["Openshift 4","Images","Admin Tasks"],"emoji":"ðŸ’¾","link":"https://docs.openshift.com/container-platform"},"fields":{"slug":"/imagemanagement/get-raw-disk-usage-of-images/"},"tableOfContents":{"items":[{"url":"#get-raw-disk-usage-of-all-images-per-namespace","title":"Get raw disk usage of all images per namespace"}]},"parent":{"__typename":"File","relativePath":"imagemanagement/get-raw-disk-usage-of-images.md"}}},"pageContext":{"id":"f6964558-8148-5c85-8618-2105e18d2af5","previous":{"id":"5f47037b-adc3-520d-b910-1c23338e8c3f","frontmatter":{"title":"Get tags of remote images","tags":["Openshift 4","Images"]},"fields":{"slug":"/imagemanagement/get-tags-of-remote-image/"}},"next":{"id":"45b7c282-1775-53d4-864f-8e159e7712ab","frontmatter":{"title":"Remove kubeadmin user","tags":["Openshift 4","Configuration","Admin Tasks"]},"fields":{"slug":"/identity/remove-kubeadmin-user/"}},"hasUntagged":false,"basePath":"/"}},"staticQueryHashes":["1437003973","2744905544","3664657028","467212769","467212769"]}